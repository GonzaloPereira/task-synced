(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{100:function(e,t,n){},101:function(e,t,n){},102:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(31),s=n.n(a),i=(n(83),n(17)),u=n(12),o=n(2),l=n.n(o),j=n(5),b=n(4),d=(n(51),n(121)),m=n(120);function p(){return(p=Object(j.a)(l.a.mark((function e(t,n,r){var c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n,name:r})},e.abrupt("return",fetch("/api/register",c));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function f(){return(f=Object(j.a)(l.a.mark((function e(t,n){var r;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:t,password:n})},e.abrupt("return",fetch("/api/login",r));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function O(){return(O=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/logout"));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(){return x.apply(this,arguments)}function x(){return(x=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/isAuthenticated").then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function v(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/users/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var k=n(0),g=c.a.createContext();function w(){return Object(r.useContext)(g)}function N(e){var t=e.children,n=Object(r.useState)(),c=Object(b.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(!0),u=Object(b.a)(i,2),o=u[0],d=u[1],m=Object(r.useRef)(!1);function x(){return v.apply(this,arguments)}function v(){return(v=Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:t=e.sent,s(t),d(!1);case 5:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function y(){OneSignal.push(Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h();case 2:t=e.sent,OneSignal.setExternalUserId(String(t._id));case 4:case"end":return e.stop()}}),e)}))))}Object(r.useEffect)((function(){return m.current=!0,function(){m.current=!1}})),Object(r.useEffect)(Object(j.a)(l.a.mark((function e(){var t;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=function(){s(null)},!m.current){e.next=4;break}return e.next=4,x();case 4:return e.abrupt("return",t);case 5:case"end":return e.stop()}}),e)}))),[]);var w={currentUser:a,refreshUser:x,login:function(e,t){return function(e,t){return f.apply(this,arguments)}(e,t).then((function(){return x()})).then((function(){return y()}))},signup:function(e,t,n){return function(e,t,n){return p.apply(this,arguments)}(e,t,n).then((function(){return x()})).then((function(){return y()}))},logout:function(){return function(){return O.apply(this,arguments)}().then((function(){return x()}))}};return Object(k.jsx)(g.Provider,{value:w,children:!o&&t})}function T(){var e=Object(r.useRef)(""),t=Object(r.useRef)(""),n=Object(r.useRef)(""),c=Object(r.useRef)(""),a=w(),s=a.signup,u=(a.refreshUser,Object(r.useState)("")),o=Object(b.a)(u,2),p=o[0],f=o[1],O=Object(r.useState)(!1),h=Object(b.a)(O,2),x=h[0],v=h[1],y=Object(r.useRef)(!1);function g(){return(g=Object(j.a)(l.a.mark((function r(a){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.preventDefault(),t.current.value===n.current.value){r.next=3;break}return r.abrupt("return",f("Passwords do not match"));case 3:if(e.current.value&&t.current.value&&n.current.value&&c.current.value){r.next=5;break}return r.abrupt("return",f("Empty field not allowed"));case 5:if(!(c.current.value&&c.current.value.length>20)){r.next=7;break}return r.abrupt("return",f("Name too long"));case 7:return r.prev=7,f(""),v(!0),r.next=12,s(e.current.value,t.current.value,c.current.value);case 12:if(r.sent.ok){r.next=15;break}throw new Error;case 15:r.next=20;break;case 17:r.prev=17,r.t0=r.catch(7),f("Failed to create an account");case 20:y.current&&v(!1);case 21:case"end":return r.stop()}}),r,null,[[7,17]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return y.current=!0,function(){y.current=!1}})),Object(k.jsxs)("div",{className:"form",children:[Object(k.jsx)("h2",{children:"Sign Up"}),Object(k.jsxs)("form",{onSubmit:function(e){return g.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"email",children:[Object(k.jsx)("p",{children:"Email"}),Object(k.jsx)("input",{type:"email",id:"email",ref:e})]}),Object(k.jsxs)("label",{htmlFor:"password",children:[Object(k.jsx)("p",{children:"Password"}),Object(k.jsx)("input",{type:"password",ref:t,id:"password"})]}),Object(k.jsxs)("label",{htmlFor:"passwordConfirm",children:[Object(k.jsx)("p",{children:"Confirm password"}),Object(k.jsx)("input",{type:"password",ref:n,id:"passwordConfirm"})]}),Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",ref:c,id:"name"})]}),Object(k.jsx)("button",{className:"blue-submit-button",disabled:x,type:"submit",children:"Sign Up"}),Object(k.jsxs)("p",{children:["Already have and account?"," ",Object(k.jsx)(i.b,{to:"/login",style:{color:"#00adb5"},children:"Log In"})]})]}),x&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),p&&Object(k.jsx)(m.a,{severity:"error",children:p})]})}function S(){var e=Object(r.useRef)(),t=Object(r.useRef)(),n=w().login,c=Object(r.useState)(""),a=Object(b.a)(c,2),s=a[0],u=a[1],o=Object(r.useState)(!1),p=Object(b.a)(o,2),f=p[0],O=p[1],h=Object(r.useRef)(!1);function x(){return(x=Object(j.a)(l.a.mark((function r(c){return l.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c.preventDefault(),e.current.value&&t.current.value){r.next=3;break}return r.abrupt("return",u("Empty field not allowed"));case 3:return r.prev=3,u(""),O(!0),r.next=8,n(e.current.value,t.current.value);case 8:if(r.sent.ok){r.next=11;break}throw new Error;case 11:r.next=16;break;case 13:r.prev=13,r.t0=r.catch(3),u("Failed to login");case 16:h.current&&O(!1);case 17:case"end":return r.stop()}}),r,null,[[3,13]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return h.current=!0,function(){h.current=!1}})),Object(k.jsxs)("div",{className:"form",children:[Object(k.jsx)("h2",{children:"Log In"}),Object(k.jsxs)("form",{onSubmit:function(e){return x.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"email",children:[Object(k.jsx)("p",{children:"Email"}),Object(k.jsx)("input",{type:"email",ref:e,id:"email"})]}),Object(k.jsxs)("label",{htmlFor:"password",children:[Object(k.jsx)("p",{children:"Password"}),Object(k.jsx)("input",{type:"password",ref:t,id:"password"})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Log In"}),Object(k.jsxs)("p",{children:["Don't have and account yet?"," ",Object(k.jsx)(i.b,{to:"/signup",style:{color:"#00adb5"},children:"Sign up"})]})]}),f&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),s&&Object(k.jsx)(m.a,{severity:"error",children:s})]})}n(91),n(53);function C(){Object(u.g)().url;return Object(k.jsx)(k.Fragment,{children:Object(k.jsxs)("div",{className:"header-join",children:[Object(k.jsx)("h1",{className:"links",children:"Task Synced"}),Object(k.jsx)(i.b,{to:"/login",className:"login-link links material-ui-link",children:Object(k.jsx)("h2",{children:"Log in"})}),Object(k.jsx)(i.b,{to:"/signup",className:"singup-link links material-ui-link",children:Object(k.jsx)("h2",{children:"Sign up"})})]})})}n(92);var E=function(){var e=(new Date).getFullYear();return Object(k.jsx)("div",{className:"footer",children:Object(k.jsxs)("p",{children:["Copyright \xa9 ",e," Gonzalo Pereira"]})})};function R(){return Object(k.jsxs)("div",{className:"join",children:[Object(k.jsx)(C,{}),Object(k.jsx)("img",{className:"div1",src:"/images/join1.png",alt:"Keep all your tasks in one place"}),Object(k.jsx)("img",{className:"div2",src:"/images/join2.png",alt:""}),Object(k.jsx)("img",{className:"div1",src:"/images/join3.png",alt:""}),Object(k.jsx)(E,{})]})}var I=n(7),F=n(44);var U=function(e){var t=e.component,n=Object(F.a)(e,["component"]),r=w().currentUser;return Object(k.jsx)(u.b,Object(I.a)(Object(I.a)({},n),{},{render:function(e){return r._id?Object(k.jsx)(t,Object(I.a)({},e)):Object(k.jsx)(u.a,{to:"/join"})}}))},A=(n(93),n(61)),_=n.n(A),D=(n(94),n(48)),M=n.n(D),P=n(58),L=n.n(P),J=n(56),Y=n.n(J),H=n(57),W=n.n(H),z=n(59),B=n.n(z),G=n(30),K=n.n(G),q=n(60),Q=n.n(q),V=n(28),X=n.n(V);function Z(e,t){return $.apply(this,arguments)}function $(){return($=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/users/".concat(t,"/notifications/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ee(e,t){return te.apply(this,arguments)}function te(){return(te=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=console,e.next=3,JSON.stringify({name:n});case 3:return e.t1=e.sent,e.t0.log.call(e.t0,e.t1),e.abrupt("return",fetch("/api/users/".concat(t),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:n})}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ne(e){switch(e){case 1:return Object(k.jsx)(Y.a,{className:"notification-icon blue-icon"});case 2:return Object(k.jsx)(W.a,{className:"notification-icon red-icon"});case 3:return Object(k.jsx)(L.a,{className:"notification-icon blue-icon"});case 4:case 5:return Object(k.jsx)(K.a,{className:"notification-icon blue-icon"});case 6:return Object(k.jsx)(B.a,{className:"notification-icon red-icon"});case 7:return Object(k.jsx)(Q.a,{className:"notification-icon blue-icon"});default:return Object(k.jsx)(M.a,{className:"notification-icon"})}}function re(e){var t=e.notification,n=e.refreshUser,c=e.userId,a=t._id,s=t.name,i=t.description,u=t.date,o=t.type,d=Object(r.useRef)(""),m=Object(r.useRef)(""),p=Object(r.useState)(1),f=Object(b.a)(p,2),O=f[0],h=f[1];function x(){return(x=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:m.current=setInterval((function(){h((function(e){return e-.05}))}),50),d.current=setTimeout(Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Z(c,a);case 2:n();case 3:case"end":return e.stop()}}),e)}))),1e3);case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return function(){m.current&&clearInterval(m.current),d.current&&clearTimeout(d.current)}}),[]),Object(k.jsxs)("div",{className:"notification",style:{opacity:O},children:[ne(o),Object(k.jsx)("h5",{className:"notification-name",children:s}),Object(k.jsxs)("p",{className:"notification-description",children:[" ",i]}),Object(k.jsx)("p",{className:"notification-date",children:X()(new Date(u)).fromNow()}),Object(k.jsx)(M.a,{className:"notification-done blue-icon",onClick:function(){return x.apply(this,arguments)}})]})}function ce(e){var t=e.userId,n=e.refreshUser,r=e.notifications;return Object(k.jsx)("div",{className:"notification-container",children:r.map((function(e,r){return Object(k.jsxs)("div",{children:[0!==r&&Object(k.jsx)("hr",{className:"teams-separator-line"}),Object(k.jsx)(re,{className:"notification",notification:e,userId:t,refreshUser:n})]},e._id)}))})}function ae(e){var t=e.count;return Object(k.jsx)("div",{className:"notification-count",children:Object(k.jsx)("p",{children:t})})}var se=function(){var e=Object(u.g)().url,t=Object(r.useReducer)((function(e){return!e}),!1),n=Object(b.a)(t,2),c=n[0],a=n[1],s=w(),o=s.currentUser,l=s.refreshUser,j=o.notifications,d=j.length;return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"header",children:[Object(k.jsx)("h1",{className:"links",children:"Task Synced"}),Object(k.jsx)(i.b,{to:"".concat(e,"/schedule"),className:"schedule-link links material-ui-link",children:Object(k.jsx)("h2",{children:"Schedule"})}),Object(k.jsx)(i.b,{to:"".concat(e,"/teams"),className:"teams-link  links material-ui-link",children:Object(k.jsx)("h2",{children:"Teams"})}),Object(k.jsx)(i.b,{to:"".concat(e,"/profile"),className:"profile-link links material-ui-link",children:Object(k.jsx)("h2",{children:"Profile"})}),Object(k.jsxs)("div",{className:"notification-open-icon",children:[Object(k.jsx)(_.a,{onClick:a,className:"links "}),d>0&&Object(k.jsx)(ae,{count:d})]})]}),c&&Object(k.jsx)(ce,{userId:o._id,refreshUser:l,notifications:j})]})},ie=(n(97),n(98),n(66)),ue=n.n(ie),oe=n(65),le=n.n(oe),je=n(67),be=n.n(je),de=n(68),me=n.n(de),pe=n(63),fe=n.n(pe),Oe=n(64),he=n.n(Oe),xe=n(41),ve=n.n(xe),ye=n(18);function ke(e){return ge.apply(this,arguments)}function ge(){return(ge=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t)).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e){return Ne.apply(this,arguments)}function Ne(){return(Ne=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/name")).then((function(e){return e.json()})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Te(e,t){return Se.apply(this,arguments)}function Se(){return(Se=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t);case 2:if(!e.sent.members.find((function(e){return String(e._id)===String(n._id)}))){e.next=5;break}throw new Error("Member already in team");case 5:return e.abrupt("return",fetch("/api/teams/".concat(t,"/members"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({_id:n._id,name:n.name,isAdmin:0})}));case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ce(e,t){return Ee.apply(this,arguments)}function Ee(){return(Ee=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/members/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Re(e,t){return Ie.apply(this,arguments)}function Ie(){return(Ie=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/members/").concat(n,"/admin"),{method:"PATCH"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Fe(e,t){return Ue.apply(this,arguments)}function Ue(){return(Ue=Object(j.a)(l.a.mark((function e(t,n){var r,c;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("/api/teams",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}).then((function(e){return e.json()}));case 2:return r=e.sent,c=r._id,e.next=6,Te(c,n);case 6:return e.abrupt("return",Re(c,n._id));case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Ae(e,t){return _e.apply(this,arguments)}function _e(){return(_e=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function De(e){return Me.apply(this,arguments)}function Me(){return(Me=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Pe(e,t){return Le.apply(this,arguments)}function Le(){return(Le=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/tasks"),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(n)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function Je(e,t,n){return Ye.apply(this,arguments)}function Ye(){return(Ye=Object(j.a)(l.a.mark((function e(t,n,r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/tasks/").concat(n),{method:"PATCH",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function He(e,t){return We.apply(this,arguments)}function We(){return(We=Object(j.a)(l.a.mark((function e(t,n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",fetch("/api/teams/".concat(t,"/tasks/").concat(n),{method:"DELETE"}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}n(99);var ze=n(62),Be=n.n(ze);function Ge(e){var t=e.children,n=e.close;return Object(k.jsx)("div",{className:"popup-out",onMouseDown:n,children:Object(k.jsxs)("div",{className:"popup-in form",onMouseDown:function(e){return e.stopPropagation()},children:[Object(k.jsx)(Be.a,{className:"popup-close-icon",onClick:n}),t]})})}function Ke(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function qe(e){var t=e.close,n=e.teamId,c=e.refreshTeam,a=e.task,s=Object(r.useReducer)(Ke,{name:a.name,description:a.description,date:X()(a.date).utc().format("YYYY-MM-DDTHH:mm:ss"),changeDate:!1}),i=Object(b.a)(s,2),u=i[0],o=i[1],p=Object(r.useState)(""),f=Object(b.a)(p,2),O=f[0],h=f[1],x=Object(r.useState)(!1),v=Object(b.a)(x,2),y=v[0],g=v[1],N=w().refreshUser,T=Object(r.useRef)(!1);function S(){return(S=Object(j.a)(l.a.mark((function e(r){var s;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(u.name&&u.name.length>50)){e.next=3;break}return e.abrupt("return",h("Name too long"));case 3:return e.prev=3,h(""),g(!0),s=Object(I.a)(Object(I.a)({},u),{},{date:u.date?X()(u.date).toISOString():""}),e.next=9,Je(n,a._id,s);case 9:if(e.sent.ok){e.next=12;break}throw new Error;case 12:return e.next=14,t();case 14:return e.next=16,c();case 16:return e.next=18,N();case 18:e.next=23;break;case 20:e.prev=20,e.t0=e.catch(3),h("Failed to edit task");case 23:T.current&&g(!1);case 24:case"end":return e.stop()}}),e,null,[[3,20]])})))).apply(this,arguments)}function C(e){o({name:e.target.name,value:e.target.value})}return console.log(u.date),Object(r.useEffect)((function(){return T.current=!0,function(){T.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Edit Task"}),Object(k.jsxs)("form",{onSubmit:function(e){return S.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",id:"name",name:"name",value:u.name||"",onChange:C,placeholder:"Leave blank for no changes"})]}),Object(k.jsxs)("label",{htmlFor:"description",children:[Object(k.jsx)("p",{children:"Description"}),Object(k.jsx)("textarea",{type:"text",id:"description",name:"description",value:u.description||"",onChange:C,placeholder:"Leave blank for no changes"})]}),Object(k.jsxs)("label",{htmlFor:"date",children:[Object(k.jsx)("p",{children:"Expected date"}),Object(k.jsx)("input",{type:"datetime-local",id:"date",name:"date",value:u.date||"",onChange:C,min:"2020-01-01",max:"2022-01-01"})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Edit task"})]}),Object(k.jsx)("br",{}),y&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),O&&Object(k.jsx)(m.a,{severity:"error",children:O})]})}function Qe(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}function Ve(){var e=Object(r.useState)(Qe()),t=Object(b.a)(e,2),n=t[0],c=t[1];return Object(r.useEffect)((function(){function e(){c(Qe())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),n}function Xe(e){var t=e.task,n=e.teamId,c=e.refreshTeam,a=e.editable,s=e.deleteTask,i=e.userIsAdmin,u=t._id,o=t.name,d=t.description,m=t.date,p=t.ownerTeamId,f=Object(r.useState)(""),O=Object(b.a)(f,2),h=O[0],x=O[1],v=Ve().width,y=Object(r.useState)(),g=Object(b.a)(y,2),w=g[0],N=g[1],T=Object(r.useState)(!1),S=Object(b.a)(T,2),C=S[0],E=S[1],R=Object(r.useReducer)((function(e){return!e}),!1),F=Object(b.a)(R,2),U=F[0],A=F[1],_=Object(r.useReducer)((function(e){return!e}),!1),D=Object(b.a)(_,2),M=D[0],P=D[1],L=Object(r.useReducer)((function(e){return!e}),!1),J=Object(b.a)(L,2),Y=J[0],H=J[1],W=a&&v>700||v<=700&&U&&a,z=m?new Date(m):"",B=z<new Date;Object(r.useEffect)((function(){N(a?v<=700?{gridTemplateColumns:U?"50px 5fr 40px":"50px 5fr ".concat(z?"40px 130px":""),gridTemplateRows:U?"minmax(2.5rem, auto) 2rem  auto":"minmax(2.5rem, auto) auto"}:{gridTemplateColumns:"50px 5fr ".concat(z?"50px 160px":""," 50px"),gridTemplateRows:"minmax(2.5rem, auto) auto"}:v<=700?{gridTemplateColumns:"50px 5fr ".concat(z?"30px 130px":""),gridTemplateRows:U?"minmax(2.5rem, auto) 2rem  auto":"minmax(2.5rem, auto) auto"}:{gridTemplateColumns:"50px 5fr 1fr ".concat(z?"30px 160px":""),gridTemplateRows:U?"minmax(2.5rem, auto) 2rem  auto":"minmax(2.5rem, auto) auto"})}),[v,U,m]);var G=Object(r.useState)(),q=Object(b.a)(G,2),Q=q[0],V=q[1];Object(r.useEffect)((function(){V(U&&a&&v<=700?{gridColumn:"2/7"}:U&&!a&&v>700?{gridColumn:"2/4"}:{gridColumn:"2/3"})}),[v,U]),Object(r.useEffect)(Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=x,e.next=3,we(p);case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)}))),[]);var Z=Object(r.useRef)(""),$=Object(r.useRef)(""),ee=Object(r.useState)(1),te=Object(b.a)(ee,2),ne=te[0],re=te[1];return Object(r.useEffect)((function(){return function(){$.current&&clearInterval($.current),Z.current&&clearTimeout(Z.current)}}),[]),Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"task",onMouseOver:function(){return E(!0)},onMouseOut:function(){return E(!1)},onClick:function(){return A(!0)},style:Object(I.a)(Object(I.a)({},w),{},{opacity:ne}),children:[C||U?Object(k.jsx)(k.Fragment,{children:U?Object(k.jsx)(k.Fragment,{children:a?Object(k.jsx)(K.a,{className:"task-button blue-icon",onMouseOver:function(e){return e.stopPropagation()},onMouseOut:function(e){return e.stopPropagation()},onClick:function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),H();case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):Object(k.jsx)(fe.a,{})}):Object(k.jsx)(he.a,{})}):Object(k.jsxs)(k.Fragment,{children:[M?Object(k.jsx)(le.a,{}):Object(k.jsx)(ue.a,{})," "]}),Object(k.jsx)("h4",{style:Q,children:o}),v>700&&!a&&!U&&Object(k.jsx)("p",{className:"task-team-name",children:h}),(z||a&&U&&v<=700)&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)(be.a,{}),Object(k.jsx)("h5",{style:{color:B&&z?"#e84545":"white"},children:z?X()(z).calendar(null,{sameElse:"dddd MMMM h:mm A"}):Object(k.jsx)("p",{style:{opacity:"0.5"},children:"No date"})})]}),W&&i&&Object(k.jsx)(k.Fragment,{children:M?Object(k.jsx)(ve.a,{className:"task-button red-icon",onMouseOver:function(e){return e.stopPropagation()},onMouseOut:function(e){return e.stopPropagation()},onClick:function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),P(),clearTimeout(Z.current),clearInterval($.current),re(1);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}):Object(k.jsx)(me.a,{className:"task-button blue-icon",onMouseOver:function(e){return e.stopPropagation()},onMouseOut:function(e){return e.stopPropagation()},onClick:function(){var e=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.stopPropagation(),P(),$.current=setInterval((function(){re((function(e){return e-.025}))}),50),Z.current=setTimeout((function(){s(u)}),2e3);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()})}),U&&!a&&Object(k.jsx)("p",{style:{gridColumn:"1/7"},children:h}),U&&Object(k.jsx)("div",{className:"task-description",style:{color:d?"white":"gray"},children:Object(k.jsx)("p",{children:null!==d&&void 0!==d?d:"No description"})})]}),Y&&Object(k.jsx)(qe,{task:t,teamId:n,refreshTeam:c,close:H})]})}function Ze(e){var t=e.tasks,n=e.style,r=e.teamId,c=e.refreshTeam,a=e.editable,s=e.userIsAdmin,i=e.taskEditMode,u=w().refreshUser;function o(e){return b.apply(this,arguments)}function b(){return(b=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,He(r,t);case 3:return e.next=5,u();case 5:return e.next=7,c();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(k.jsx)("div",{className:"tasks-container",style:n,children:t.map((function(e,t){return Object(k.jsxs)("div",{children:[0!==t&&Object(k.jsx)("hr",{className:"dark-separator-line"}),Object(k.jsx)(Xe,{task:e,teamId:r,userIsAdmin:s,refreshTeam:c,deleteTask:o,taskEditMode:i,editable:a})]},e._id)}))})}var $e=function(){var e=w().currentUser.tasks;return Object(k.jsx)("div",{className:"schedule",children:e.length>0?Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("h2",{children:"Tasks"}),Object(k.jsx)(Ze,{tasks:e,style:{borderRadius:"5px",width:"100%"}})]}):Object(k.jsx)("h2",{children:"You don't have any tasks"})})},et=(n(54),n(69)),tt=n.n(et),nt=n(49),rt=n.n(nt);var ct=function(e){var t=e.toggle,n=e.toggleCreateTeam,r=e.toggleJoinTeam;return Object(k.jsxs)("div",{className:"team-add",children:[Object(k.jsxs)("div",{className:"team-add-row",onClick:function(){t(),r()},children:[Object(k.jsx)(rt.a,{fontSize:"inherit",style:{color:"00adb5"}}),Object(k.jsx)("p",{children:"Join a team"})]}),Object(k.jsxs)("div",{className:"team-add-row",onClick:function(){t(),n()},children:[Object(k.jsx)(rt.a,{fontSize:"inherit",style:{color:"00adb5"}}),Object(k.jsx)("p",{children:"Create a new team"})]})]})};function at(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function st(e){var t=e.close,n=Object(r.useReducer)(at,{}),c=Object(b.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),u=Object(b.a)(i,2),o=u[0],p=u[1],f=Object(r.useState)(!1),O=Object(b.a)(f,2),h=O[0],x=O[1],v=w(),y=v.currentUser,g=v.refreshUser,N=Object(r.useRef)(!1);function T(){return(T=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.name){e.next=3;break}return e.abrupt("return",p("Empty name not allowed"));case 3:if(!(a.name&&a.name.length>=40)){e.next=5;break}return e.abrupt("return",p("Name too long"));case 5:return e.prev=5,p(""),x(!0),e.next=10,Fe(a,y);case 10:if(e.sent.ok){e.next=13;break}throw new Error;case 13:return e.next=15,t();case 15:return e.next=17,g();case 17:e.next=23;break;case 19:e.prev=19,e.t0=e.catch(5),console.log(e.t0),p("Failed to create team");case 23:N.current&&x(!1);case 24:case"end":return e.stop()}}),e,null,[[5,19]])})))).apply(this,arguments)}function S(e){s({name:e.target.name,value:e.target.value})}return Object(r.useEffect)((function(){return N.current=!0,function(){N.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Create new Team"}),Object(k.jsxs)("form",{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",id:"name",name:"name",value:a.name||"",onChange:S})]}),Object(k.jsxs)("label",{htmlFor:"description",children:[Object(k.jsx)("p",{children:"Description"}),Object(k.jsx)("textarea",{type:"text",id:"description",name:"description",value:a.description||"",onChange:S})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Create"})]}),Object(k.jsx)("br",{}),h&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),o&&Object(k.jsx)(m.a,{severity:"error",children:o})]})}function it(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function ut(e){var t=e.close,n=Object(r.useReducer)(it,{}),c=Object(b.a)(n,2),a=c[0],s=c[1],i=Object(r.useState)(""),u=Object(b.a)(i,2),o=u[0],p=u[1],f=Object(r.useState)(!1),O=Object(b.a)(f,2),h=O[0],x=O[1],v=w(),y=v.currentUser,g=v.refreshUser,N=Object(r.useRef)(!1);function T(){return(T=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n.preventDefault(),a.teamId){e.next=3;break}return e.abrupt("return",p("Empty field not allowed"));case 3:return e.prev=3,p(""),x(!0),e.next=8,Te(a.teamId,y);case 8:if(e.sent.ok){e.next=11;break}throw new Error;case 11:return e.next=13,t();case 13:return e.next=15,g();case 15:e.next=20;break;case 17:e.prev=17,e.t0=e.catch(3),p("Failed to join the team!");case 20:N.current&&x(!1);case 21:case"end":return e.stop()}}),e,null,[[3,17]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return N.current=!0,function(){N.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Join a Team"}),Object(k.jsxs)("form",{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"teamId",children:[Object(k.jsx)("p",{children:"Team's ID"}),Object(k.jsx)("input",{type:"text",id:"teamId",name:"teamId",value:a.teamId||"",onChange:function(e){s({name:e.target.name,value:e.target.value})}})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Join"})]}),Object(k.jsx)("br",{}),h&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),o&&Object(k.jsx)(m.a,{severity:"error",children:o})]})}var ot=function(){var e=Object(r.useReducer)((function(e){return!e}),!1),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Object(r.useReducer)((function(e){return!e}),!1),s=Object(b.a)(a,2),i=s[0],u=s[1],o=Object(r.useReducer)((function(e){return!e}),!1),l=Object(b.a)(o,2),j=l[0],d=l[1];return Object(k.jsxs)(k.Fragment,{children:[Object(k.jsxs)("div",{className:"team-title",children:[Object(k.jsx)("h3",{children:"My teams"}),Object(k.jsx)(tt.a,{onClick:c,className:"add-icon"}),n&&Object(k.jsx)(ct,{toggle:c,toggleCreateTeam:u,toggleJoinTeam:d})]}),i&&Object(k.jsx)(st,{close:u}),j&&Object(k.jsx)(ut,{close:d})]})},lt=n(42),jt=n.n(lt);var bt=function(e){var t=e.team,n=e.selectTeam;return Object(k.jsxs)("div",{className:"team-link",onClick:function(){n(t._id)},children:[Object(k.jsx)(jt.a,{className:"team-icon"}),Object(k.jsx)("h4",{children:t.name})]})};var dt=function(e){var t=e.teams,n=e.selectTeam,r=e.style;return Object(k.jsxs)("div",{className:"team-nav",style:r,children:[Object(k.jsx)(ot,{}),t.map((function(e,t){return Object(k.jsxs)("div",{children:[0!==t&&Object(k.jsx)("hr",{className:"teams-separator-line"}),Object(k.jsx)(bt,{team:e,selectTeam:n})]},e._id)}))]})},mt=n(119),pt=n(73),ft=n.n(pt),Ot=n(74),ht=n.n(Ot);function xt(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function vt(e){var t=e.close,n=e.currTeam,c=e.refreshTeam,a=Object(r.useReducer)(xt,{}),s=Object(b.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(""),p=Object(b.a)(o,2),f=p[0],O=p[1],h=Object(r.useState)(!1),x=Object(b.a)(h,2),v=x[0],y=x[1],g=w().refreshUser,N=Object(r.useRef)(!1);function T(){return(T=Object(j.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),i.name){e.next=3;break}return e.abrupt("return",O("Empty name not allowed"));case 3:if(!(i.name&&i.name.length>50)){e.next=5;break}return e.abrupt("return",O("Name too long"));case 5:return e.prev=5,O(""),y(!0),a=Object(I.a)(Object(I.a)({},i),{},{date:i.date?X()(i.date).toISOString():""}),e.next=11,Pe(n._id,a);case 11:if(e.sent.ok){e.next=14;break}throw new Error;case 14:return e.next=16,t();case 16:return e.next=18,g();case 18:return e.next=20,c();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(5),O("Failed to create a new task");case 25:N.current&&y(!1);case 26:case"end":return e.stop()}}),e,null,[[5,22]])})))).apply(this,arguments)}function S(e){u({name:e.target.name,value:e.target.value})}return Object(r.useEffect)((function(){return N.current=!0,function(){N.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Create new Task"}),Object(k.jsxs)("form",{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:S})]}),Object(k.jsxs)("label",{htmlFor:"description",children:[Object(k.jsx)("p",{children:"Description"}),Object(k.jsx)("textarea",{type:"text",id:"description",name:"description",value:i.description||"",onChange:S})]}),Object(k.jsxs)("label",{htmlFor:"date",children:[Object(k.jsx)("p",{children:"Expected date"}),Object(k.jsx)("input",{type:"datetime-local",id:"date",name:"date",value:i.date||"",onChange:S,min:"2020-01-01",max:"2022-01-01"})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Add task"})]}),Object(k.jsx)("br",{}),v&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),f&&Object(k.jsx)(m.a,{severity:"error",children:f})]})}var yt=n(72),kt=n.n(yt),gt=n(71),wt=n.n(gt),Nt=n(70),Tt=n.n(Nt);function St(e){var t=e.teamId,n=e.member,c=e.deleteMember,a=e.userIsAdmin,s=e.refreshTeam,i=e.numAdmins,u=n._id,o=n.name,d=n.isAdmin,m=Object(r.useReducer)((function(e){return!e}),!1),p=Object(b.a)(m,2),f=p[0],O=p[1],h=Object(r.useReducer)((function(e){return!e}),!1),x=Object(b.a)(h,2),v=x[0],y=x[1],g=Object(r.useState)(!1),w=Object(b.a)(g,2),N=w[0],T=w[1],S=Object(r.useRef)("");function C(){T(!0),S.current=setTimeout((function(){T(!1)}),2e3)}var E=Object(r.useRef)(""),R=Object(r.useRef)(""),I=Object(r.useState)(1),F=Object(b.a)(I,2),U=F[0],A=F[1];function _(){return(_=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(y(),1!==i||!d){e.next=4;break}return C(),e.abrupt("return");case 4:return e.next=6,Re(t,u);case 6:return e.next=8,s();case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){return function(){clearInterval(R.current),clearTimeout(S.current)}}),[]),Object(k.jsxs)("div",{className:"member",style:{opacity:U},children:[Object(k.jsx)(Tt.a,{}),Object(k.jsx)("h4",{children:o}),Object(k.jsx)("h6",{className:"admin-name",onClick:y,children:d?"Admin":"Member"}),v&&a&&Object(k.jsx)("div",{className:"admin-status",onClick:function(){return _.apply(this,arguments)},children:Object(k.jsx)("h6",{children:d?"Set user to member":"Set user to admin"})}),N&&Object(k.jsxs)("div",{className:"admin-status",children:[Object(k.jsx)(wt.a,{className:"red-icon"}),Object(k.jsx)("h6",{children:"Team needs at least one admin"})]}),a&&Object(k.jsx)(k.Fragment,{children:f?Object(k.jsx)(ve.a,{className:"task-button red-icon",onClick:function(){O(),clearTimeout(E.current),clearInterval(R.current),A(1)}}):Object(k.jsx)(kt.a,{className:"member-button red-icon",onClick:function(){1===i&&d?C():(O(),R.current=setInterval((function(){A((function(e){return e-.025}))}),50),E.current=setTimeout((function(){c(u)}),2e3))}})})]})}n(100);function Ct(e){var t=e.members,n=e.teamId,r=e.refreshTeam,c=e.userIsAdmin,a=e.numAdmins,s=e.style,i=w().refreshUser;function u(e){return o.apply(this,arguments)}function o(){return(o=Object(j.a)(l.a.mark((function e(t){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Ce(n,t);case 3:return e.next=5,i();case 5:return e.next=7,r();case 7:e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])})))).apply(this,arguments)}return Object(k.jsx)("div",{className:"members-container",style:s,children:t.map((function(e,t){return Object(k.jsxs)("div",{children:[0!==t&&Object(k.jsx)("hr",{className:"dark-separator-line"}),Object(k.jsx)(St,{member:e,teamId:n,userIsAdmin:c,numAdmins:a,refreshTeam:r,deleteMember:u})]},e._id)}))})}function Et(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function Rt(e){var t=e.close,n=e.currTeam,c=e.refreshTeam,a=Object(r.useReducer)(Et,{}),s=Object(b.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(""),p=Object(b.a)(o,2),f=p[0],O=p[1],h=Object(r.useState)(!1),x=Object(b.a)(h,2),y=x[0],g=x[1],w=Object(r.useRef)(!1);function N(){return(N=Object(j.a)(l.a.mark((function e(r){var a;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),i.id){e.next=3;break}return e.abrupt("return",O("Empty field not allowed"));case 3:return e.prev=3,O(""),g(!0),e.next=8,v(i.id);case 8:if((a=e.sent)._id){e.next=11;break}throw new Error("User doesn't exist");case 11:return e.next=13,Te(n._id,a);case 13:if(e.sent.ok){e.next=16;break}throw new Error;case 16:return e.next=18,t();case 18:return e.next=20,c();case 20:e.next=25;break;case 22:e.prev=22,e.t0=e.catch(3),"User doesn't exist"===e.t0.message?O(e.t0.message):O("Failed to add new member");case 25:w.current&&g(!1);case 26:case"end":return e.stop()}}),e,null,[[3,22]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return w.current=!0,function(){w.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Add new member"}),Object(k.jsxs)("form",{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"id",children:[Object(k.jsx)("p",{children:"Add member with User's ID"}),Object(k.jsx)("input",{type:"text",id:"id",name:"id",value:i.id||"",onChange:function(e){u({name:e.target.name,value:e.target.value})}})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Add member"}),Object(k.jsx)("p",{children:"Or send him this team's ID"}),Object(k.jsx)("div",{className:"add-member-team-id",children:n._id})]}),Object(k.jsx)("br",{}),y&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),f&&Object(k.jsx)(m.a,{severity:"error",children:f})]})}function It(e,t){return Object(I.a)(Object(I.a)({},e),{},Object(ye.a)({},t.name,t.value))}function Ft(e){var t=e.close,n=e.currTeam,c=e.refreshTeam,a=Object(r.useReducer)(It,n),s=Object(b.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(""),p=Object(b.a)(o,2),f=p[0],O=p[1],h=Object(r.useState)(!1),x=Object(b.a)(h,2),v=x[0],y=x[1],g=Object(r.useRef)(!1),N=w().refreshUser;function T(){return(T=Object(j.a)(l.a.mark((function e(r){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),!(i.name&&i.name.length>=40)){e.next=3;break}return e.abrupt("return",O("Name too long"));case 3:return e.prev=3,O(""),y(!0),e.next=8,Ae(i,n._id);case 8:if(e.sent.ok){e.next=11;break}throw new Error;case 11:return e.next=13,t();case 13:return e.next=15,N();case 15:return e.next=17,c();case 17:e.next=22;break;case 19:e.prev=19,e.t0=e.catch(3),O("Failed to create team");case 22:g.current&&y(!1);case 23:case"end":return e.stop()}}),e,null,[[3,19]])})))).apply(this,arguments)}function S(e){u({name:e.target.name,value:e.target.value})}return Object(r.useEffect)((function(){return g.current=!0,function(){g.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Edit Team"}),Object(k.jsxs)("form",{onSubmit:function(e){return T.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",id:"name",name:"name",value:i.name||"",onChange:S,placeholder:"Leave blank for no changes"})]}),Object(k.jsxs)("label",{htmlFor:"description",children:[Object(k.jsx)("p",{children:"Description"}),Object(k.jsx)("textarea",{type:"text",id:"description",name:"description",value:i.description||"",onChange:S,placeholder:"Leave blank for no changes"})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Edit"})]}),Object(k.jsx)("br",{}),v&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),f&&Object(k.jsx)(m.a,{severity:"error",children:f})]})}function Ut(e){var t=e.close,n=e.currTeam,c=e.resetTeams,a=Object(r.useState)(""),s=Object(b.a)(a,2),i=s[0],u=s[1],o=Object(r.useState)(!1),p=Object(b.a)(o,2),f=p[0],O=p[1],h=Object(r.useRef)(!1);function x(){return(x=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,u(""),O(!0),e.next=5,De(n._id);case 5:return e.next=7,t();case 7:return e.next=9,c();case 9:e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),u("Failed to delete team");case 14:h.current&&O(!1);case 15:case"end":return e.stop()}}),e,null,[[0,11]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return h.current=!0,function(){h.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsxs)("form",{onSubmit:function(){return x.apply(this,arguments)},children:[Object(k.jsx)("h3",{children:'Delete "'.concat(n.name,'"?')}),Object(k.jsx)("p",{children:"All the tasks will be deleted for all members."}),Object(k.jsx)(mt.a,{variant:"outlined",color:"secondary",className:"red-submit-button",type:"submit",children:"Yes, delete team"})]}),f&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),i&&Object(k.jsx)(m.a,{severity:"error",children:i})]})}function At(e){var t=e.close,n=e.currTeam,c=e.resetTeams,a=e.lastAdmin,s=w().currentUser,i=Object(r.useState)(""),u=Object(b.a)(i,2),o=u[0],p=u[1],f=Object(r.useState)(!1),O=Object(b.a)(f,2),h=O[0],x=O[1],v=Object(r.useRef)(!1);function y(){return(y=Object(j.a)(l.a.mark((function e(){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,p(""),x(!0),!a){e.next=8;break}return e.next=6,De(n._id);case 6:e.next=10;break;case 8:return e.next=10,Ce(n._id,s._id);case 10:return e.next=12,t();case 12:return e.next=14,c();case 14:e.next=19;break;case 16:e.prev=16,e.t0=e.catch(0),p("Failed to leave team");case 19:v.current&&x(!1);case 20:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return v.current=!0,function(){v.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsxs)("form",{onSubmit:function(){return y.apply(this,arguments)},children:[Object(k.jsx)("h3",{children:'Leave "'.concat(n.name,'"?')}),Object(k.jsx)("p",{children:"All tasks will be deleted for you"}),Object(k.jsx)(mt.a,{variant:"outlined",color:"secondary",className:"red-submit-button",type:"submit",children:"Yes, leave team"}),a&&Object(k.jsx)("p",{className:"red-icon",children:"You are the last member of the team, if you leave the team will be deleted"})]}),h&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),o&&Object(k.jsx)(m.a,{severity:"error",children:o})]})}var _t=function(e){var t=e.currTeam,n=e.resetTeams,c=e.selectTeam,a=e.userIsAdmin,s=e.style;if(!t)return Object(k.jsx)("div",{className:"team-content",style:s,children:Object(k.jsx)("h2",{children:"Select a team!"})});var i=t.name,u=t.description,o=t.tasks,l=t.members,j=Object(r.useReducer)((function(e){return!e}),!1),d=Object(b.a)(j,2),m=d[0],p=d[1],f=Object(r.useReducer)((function(e){return!e}),!1),O=Object(b.a)(f,2),h=O[0],x=O[1],v=Object(r.useReducer)((function(e){return!e}),!1),y=Object(b.a)(v,2),g=y[0],w=y[1],N=Object(r.useReducer)((function(e){return!e}),!1),T=Object(b.a)(N,2),S=T[0],C=T[1],E=Object(r.useReducer)((function(e){return!e}),!1),R=Object(b.a)(E,2),I=R[0],F=R[1],U=Ve().width,A=l.reduce((function(e,t){return e+t.isAdmin}),0);function _(){c(t._id)}return Object(k.jsxs)("div",{className:"team-content",style:s,children:[Object(k.jsx)("h3",{children:i}),Object(k.jsx)("div",{className:"team-description",children:Object(k.jsx)("p",{children:u})}),Object(k.jsx)("h3",{children:"Tasks"}),Object(k.jsx)(Ze,{tasks:o,teamId:t._id,userIsAdmin:a,refreshTeam:_,editable:!0,style:{borderRadius:a?"":"5px"}}),a&&Object(k.jsxs)("div",{className:"add-task",onClick:p,style:o&&o.length?{}:{borderRadius:"5px"},children:[Object(k.jsx)(ft.a,{className:"blue-icon"}),Object(k.jsx)("h5",{children:"Add new task"})]}),Object(k.jsx)("h3",{children:"Members"}),Object(k.jsx)(Ct,{members:l,teamId:t._id,userIsAdmin:a,numAdmins:A,refreshTeam:_,style:{borderRadius:a?"":"5px"}}),a&&Object(k.jsxs)("div",{className:"add-member",onClick:x,style:l&&l.length?{}:{borderRadius:"5px"},children:[Object(k.jsx)(ht.a,{style:{color:"00adb5"}}),Object(k.jsx)("h5",{children:"Add new member"})]}),Object(k.jsxs)("div",{style:{display:"flex",justifyContent:"flex-start"},children:[a&&Object(k.jsxs)(k.Fragment,{children:[Object(k.jsx)("div",{className:"team-edit-buttons",children:Object(k.jsx)(mt.a,{variant:"outlined",onClick:w,children:"Edit Team"})}),Object(k.jsx)("div",{className:"team-edit-buttons",children:Object(k.jsx)(mt.a,{variant:"outlined",color:"secondary",onClick:C,children:"Delete Team"})})]}),Object(k.jsx)("div",{className:"team-edit-buttons",children:Object(k.jsx)(mt.a,{variant:"outlined",color:"secondary",onClick:F,children:"Leave Team"})})]}),m&&Object(k.jsx)(vt,{close:p,currTeam:t,refreshTeam:_}),h&&Object(k.jsx)(Rt,{close:x,currTeam:t,refreshTeam:_}),g&&Object(k.jsx)(Ft,{close:w,currTeam:t,refreshTeam:_}),S&&Object(k.jsx)(Ut,{close:C,resetTeams:n,currTeam:t}),I&&Object(k.jsx)(At,{close:F,currTeam:t,resetTeams:n,lastAdmin:1===A}),U<=700&&Object(k.jsx)("h2",{className:"responsive-teams-button",onClick:n,children:"Teams"})]})};var Dt=function(){var e=Object(r.useState)(""),t=Object(b.a)(e,2),n=t[0],c=t[1],a=Ve().width,s=w().currentUser,i=s.teams,u=n?1===n.members.find((function(e){return e._id===s._id})).isAdmin:0,o=Object(r.useState)({minWidth:"100%",maxWidth:"100%",display:"block"}),d=Object(b.a)(o,2),m=d[0],p=d[1],f=Object(r.useState)({display:"none"}),O=Object(b.a)(f,2),h=O[0],x=O[1];function v(e){return y.apply(this,arguments)}function y(){return(y=Object(j.a)(l.a.mark((function e(t){var n;return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ke(t);case 2:n=e.sent,c(n);case 4:case"end":return e.stop()}}),e)})))).apply(this,arguments)}return Object(r.useEffect)((function(){a<=700?n?(p({display:"none"}),x({display:"block"})):(p({minWidth:"100%",maxWidth:"100%",display:"block"}),x({display:"none"})):(p({minWidth:"210px",maxWidth:"210px",display:"block"}),x({display:"block"}))}),[n,a]),Object(k.jsxs)("div",{className:"teams-container",children:[Object(k.jsx)(dt,{teams:i,selectTeam:v,style:m}),Object(k.jsx)(_t,{currTeam:n,selectTeam:v,style:h,resetTeams:function(){c("")},userIsAdmin:u})]})};n(101);function Mt(e){var t=e.close,n=e.currentUserName,c=e.currentUserId,a=e.refreshUser,s=Object(r.useState)(n),i=Object(b.a)(s,2),u=i[0],o=i[1],p=Object(r.useState)(""),f=Object(b.a)(p,2),O=f[0],h=f[1],x=Object(r.useState)(!1),v=Object(b.a)(x,2),y=v[0],g=v[1],w=Object(r.useRef)(!1);function N(){return(N=Object(j.a)(l.a.mark((function e(n){return l.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),e.prev=1,h(""),g(!0),e.next=6,ee(c,u);case 6:if(e.sent.ok){e.next=9;break}throw new Error;case 9:return e.next=11,t();case 11:return e.next=13,a();case 13:e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),h("Failed to edit user");case 18:w.current&&g(!1);case 19:case"end":return e.stop()}}),e,null,[[1,15]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){return w.current=!0,function(){w.current=!1}})),Object(k.jsxs)(Ge,{close:t,children:[Object(k.jsx)("h2",{children:"Edit user"}),Object(k.jsxs)("form",{onSubmit:function(e){return N.apply(this,arguments)},children:[Object(k.jsxs)("label",{htmlFor:"name",children:[Object(k.jsx)("p",{children:"Name"}),Object(k.jsx)("input",{type:"text",id:"name",name:"name",value:u,onChange:function(e){o(e.target.value)}})]}),Object(k.jsx)("button",{className:"blue-submit-button",type:"submit",children:"Edit user"})]}),Object(k.jsx)("br",{}),y&&Object(k.jsx)(d.a,{style:{backgroundColor:"#0000"}}),O&&Object(k.jsx)(m.a,{severity:"error",children:O})]})}function Pt(){var e=w(),t=e.logout,n=e.currentUser,c=e.refreshUser,a=n.name,s=n.username,i=n._id,u=Object(r.useReducer)((function(e){return!e}),!1),o=Object(b.a)(u,2),l=o[0],j=o[1];return Object(k.jsxs)("div",{className:"profile",children:[Object(k.jsxs)("div",{className:"profile-title",children:[Object(k.jsx)("h2",{children:"My Profile"}),Object(k.jsx)(K.a,{className:"profile-edit-button",onClick:j})]}),Object(k.jsx)("div",{className:"profile-pic",children:Object(k.jsx)(jt.a,{fontSize:"inherit"})}),Object(k.jsx)("h3",{children:"Name"}),Object(k.jsx)("p",{children:a}),Object(k.jsx)("h3",{children:"Email"}),Object(k.jsx)("p",{children:s}),Object(k.jsx)("h3",{children:"User ID"}),Object(k.jsx)("p",{children:i}),Object(k.jsx)("button",{className:"logout-button",type:"button",onClick:function(){t()},children:"Log out"}),l&&Object(k.jsx)(Mt,{close:j,currentUserName:n.name,currentUserId:n._id,refreshUser:c})]})}var Lt=function(){var e=Object(u.g)().path;return Object(k.jsxs)("main",{children:[Object(k.jsx)(se,{}),Object(k.jsx)("div",{className:"content-container",children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(U,{path:e,exact:!0,children:Object(k.jsx)(u.a,{to:"".concat(e,"/schedule")})}),Object(k.jsx)(U,{path:"".concat(e,"/schedule"),component:$e,exact:!0}),Object(k.jsx)(U,{path:"".concat(e,"/teams"),component:Dt}),Object(k.jsx)(U,{path:"".concat(e,"/profile"),component:Pt,exact:!0})]})}),Object(k.jsx)(E,{})]})};var Jt=function(e){var t=e.component,n=e.restricted,r=Object(F.a)(e,["component","restricted"]),c=w().currentUser;return Object(k.jsx)(u.b,Object(I.a)(Object(I.a)({},r),{},{render:function(e){return c._id&&n?Object(k.jsx)(u.a,{to:"/"}):Object(k.jsx)(t,Object(I.a)({},e))}}))};function Yt(){return Object(k.jsx)(i.a,{children:Object(k.jsx)(N,{children:Object(k.jsxs)(u.d,{children:[Object(k.jsx)(Jt,{restricted:!0,path:"/login",component:S,exact:!0}),Object(k.jsx)(Jt,{restricted:!0,path:"/signup",component:T,exact:!0}),Object(k.jsx)(Jt,{restricted:!0,path:"/join",component:R,exact:!0}),Object(k.jsx)(U,{path:"/home",component:Lt}),Object(k.jsx)(u.b,{path:"/",exact:!0,children:Object(k.jsx)(u.a,{to:"/home"})})]})})})}s.a.render(Object(k.jsx)(c.a.StrictMode,{children:Object(k.jsx)(Yt,{})}),document.getElementById("root"))},51:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},83:function(e,t,n){},91:function(e,t,n){},92:function(e,t,n){},93:function(e,t,n){},94:function(e,t,n){},97:function(e,t,n){},98:function(e,t,n){},99:function(e,t,n){}},[[102,1,2]]]);
//# sourceMappingURL=main.3790e10b.chunk.js.map